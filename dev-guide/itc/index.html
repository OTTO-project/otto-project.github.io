<!DOCTYPE html><html><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="ie=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><meta name="generator" content="Gatsby 2.15.29"/><title data-react-helmet="true">Inter-Thread Communication | gatsby-theme-documentation</title><meta data-react-helmet="true" name="title" content="Inter-Thread Communication | gatsby-theme-documentation"/><meta data-react-helmet="true" name="description" content="Inter-Thread Communication Actions Actions are at the center of the inter-thread communication model used in OTTO. The are the &quot;packagesâ€¦"/><link rel="preload" as="font" type="font/woff2" crossorigin="anonymous" href="/google-fonts/s/roboto/v20/KFOlCnqEu92Fr1MmWUlfBBc4.woff2"/><link rel="preload" as="font" type="font/woff2" crossorigin="anonymous" href="/google-fonts/s/roboto/v20/KFOmCnqEu92Fr1Mu4mxK.woff2"/><link rel="preload" as="font" type="font/woff2" crossorigin="anonymous" href="/google-fonts/s/sourcecodepro/v11/HI_SiYsKILxRpg3hIP6sJ7fM7PqlPevW.woff2"/><link rel="preload" as="font" type="font/woff2" crossorigin="anonymous" href="/google-fonts/s/sourcecodepro/v11/HI_XiYsKILxRpg3hIP6sJ7fM7Pqths7Ds-cq.woff2"/><style type="text/css">@font-face{font-family:Roboto;font-style:normal;font-weight:400;src:local('Roboto'),local('Roboto-Regular'),url(/google-fonts/s/roboto/v20/KFOmCnqEu92Fr1Mu4mxK.woff2) format('woff2'),url(/google-fonts/s/roboto/v20/KFOmCnqEu92Fr1Mu4mxM.woff) format('woff');font-display: swap;}@font-face{font-family:Roboto;font-style:normal;font-weight:700;src:local('Roboto Bold'),local('Roboto-Bold'),url(/google-fonts/s/roboto/v20/KFOlCnqEu92Fr1MmWUlfBBc4.woff2) format('woff2'),url(/google-fonts/s/roboto/v20/KFOlCnqEu92Fr1MmWUlfBBc-.woff) format('woff');font-display: swap;}@font-face{font-family:'Source Code Pro';font-style:normal;font-weight:400;src:local('Source Code Pro Regular'),local('SourceCodePro-Regular'),url(/google-fonts/s/sourcecodepro/v11/HI_SiYsKILxRpg3hIP6sJ7fM7PqlPevW.woff2) format('woff2'),url(/google-fonts/s/sourcecodepro/v11/HI_SiYsKILxRpg3hIP6sJ7fM7PqlPevQ.woff) format('woff');font-display: swap;}@font-face{font-family:'Source Code Pro';font-style:normal;font-weight:700;src:local('Source Code Pro Bold'),local('SourceCodePro-Bold'),url(/google-fonts/s/sourcecodepro/v11/HI_XiYsKILxRpg3hIP6sJ7fM7Pqths7Ds-cq.woff2) format('woff2'),url(/google-fonts/s/sourcecodepro/v11/HI_XiYsKILxRpg3hIP6sJ7fM7Pqths7Ds-cs.woff) format('woff');font-display: swap;}</style><link as="script" rel="preload" href="/component---packages-gatsby-theme-documentation-src-templates-doc-js-3050a3c279815a8c4442.js"/><link as="script" rel="preload" href="/commons-4bfc53ff4c4528b99da9.js"/><link as="script" rel="preload" href="/app-f4053caff0e3d0099362.js"/><link as="script" rel="preload" href="/webpack-runtime-26ca6f1d7a23b7e277b7.js"/><link as="fetch" rel="preload" href="/page-data/dev-guide/itc/page-data.json" crossorigin="anonymous"/></head><body><script>(function() { try {
        var mode = localStorage.getItem('theme-ui-color-mode');
        if (!mode) return
        document.body.classList.add('theme-ui-' + mode);
      } catch (e) {} })();</script><noscript id="gatsby-noscript">This app works best with JavaScript enabled.</noscript><div id="___gatsby"><style data-emotion-css="15cuody">body{--theme-ui-colors-text:var(--theme-ui-colors-text,#3b454e);--theme-ui-colors-background:var(--theme-ui-colors-background,#fff);--theme-ui-colors-primary:var(--theme-ui-colors-primary,#E53D34);--theme-ui-colors-secondary:var(--theme-ui-colors-secondary,#119);--theme-ui-colors-muted:var(--theme-ui-colors-muted,rgb(245,247,249));--theme-ui-colors-mutedText:var(--theme-ui-colors-mutedText,rgb(193,199,205));--theme-ui-colors-highlight:var(--theme-ui-colors-highlight,#ffffcc);--theme-ui-colors-gray:var(--theme-ui-colors-gray,#777);--theme-ui-colors-purple:var(--theme-ui-colors-purple,#705);--theme-ui-colors-heading:var(--theme-ui-colors-heading,rgb(36,42,49));color:var(--theme-ui-colors-text,var(--theme-ui-colors-text,#3b454e));background-color:var(--theme-ui-colors-background,var(--theme-ui-colors-background,#fff));}body.theme-ui-dark{--theme-ui-colors-text:var(--theme-ui-colors-modes-dark-text,#d8d8d8);--theme-ui-colors-background:var(--theme-ui-colors-modes-dark-background,#060606);--theme-ui-colors-primary:var(--theme-ui-colors-modes-dark-primary,#e8524a);--theme-ui-colors-secondary:var(--theme-ui-colors-modes-dark-secondary,#e0f);--theme-ui-colors-muted:var(--theme-ui-colors-modes-dark-muted,#191919);--theme-ui-colors-mutedText:var(--theme-ui-colors-modes-dark-mutedText,#4a4a4a);--theme-ui-colors-highlight:var(--theme-ui-colors-modes-dark-highlight,#ffffcc);--theme-ui-colors-gray:var(--theme-ui-colors-modes-dark-gray,#999);--theme-ui-colors-purple:var(--theme-ui-colors-modes-dark-purple,#f6c);--theme-ui-colors-heading:var(--theme-ui-colors-modes-dark-heading,#f1f1f1);}</style><div style="outline:none" tabindex="-1" role="group" id="gatsby-focus-wrapper"><style data-emotion-css="44g6u2">.css-44g6u2{font-family:Content-font,Roboto,sans-serif;line-height:1.625;font-weight:400;}</style><div class="css-44g6u2"><style data-emotion-css="76knjw">body{margin:0;color:#3b454e;background-color:#fff;}</style><style data-emotion-css="1svsvwq">.css-1svsvwq{min-height:100vh;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;}</style><style data-emotion-css="1eiazfv">.css-1eiazfv{box-sizing:border-box;min-width:0;min-height:100vh;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;}</style><div class="css-1eiazfv"><style data-emotion-css="k008qs">.css-k008qs{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;}</style><style data-emotion-css="80zs6q">.css-80zs6q{box-sizing:border-box;min-width:0;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;}</style><header class="css-80zs6q"><style data-emotion-css="1wlb98n">.css-1wlb98n{width:100%;min-width:0;max-width:1024px;margin-left:auto;margin-right:auto;padding:16px;}</style><style data-emotion-css="10qzsxd">.css-10qzsxd{box-sizing:border-box;min-width:0;width:100%;min-width:0;max-width:1024px;margin-left:auto;margin-right:auto;padding:16px;}</style><div class="css-10qzsxd"><style data-emotion-css="x4dmss">.css-x4dmss{-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;}</style><style data-emotion-css="gg4vpm">.css-gg4vpm{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;}</style><style data-emotion-css="17xq3pr">.css-17xq3pr{box-sizing:border-box;min-width:0;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;}</style><div class="css-17xq3pr"><style data-emotion-css="15n6723">.css-15n6723{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;width:100%;}.css-15n6723 h1{margin:0;}.css-15n6723 ul{margin-left:auto;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;list-style-type:none;}.css-15n6723 li{margin-left:16px;}</style><style data-emotion-css="1dyk7ms">.css-1dyk7ms{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;width:100%;}.css-1dyk7ms h1{margin:0;}.css-1dyk7ms ul{margin-left:auto;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;list-style-type:none;}.css-1dyk7ms li{margin-left:16px;}</style><style data-emotion-css="18jt5me">.css-18jt5me{box-sizing:border-box;min-width:0;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;width:100%;}.css-18jt5me h1{margin:0;}.css-18jt5me ul{margin-left:auto;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;list-style-type:none;}.css-18jt5me li{margin-left:16px;}</style><div class="css-18jt5me"><style data-emotion-css="1bmf9ul">.css-1bmf9ul{font-family:inherit;font-size:24px;color:inherit;background-color:transparent;width:32px;height:32px;padding:4px;margin:0;border:0;-webkit-appearance:none;-moz-appearance:none;appearance:none;}.css-1bmf9ul:focus{outline:2px solid;}@media screen and (min-width:40em){.css-1bmf9ul{display:none;}}</style><button title="Toggle Menu" class="css-1bmf9ul"><style data-emotion-css="1i2z6sa">.css-1i2z6sa{display:block;margin:0;}</style><svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" fill="currentcolor" viewBox="0 0 24 24" class="css-1i2z6sa"><path d="M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z"></path></svg></button><style data-emotion-css="1x438zi">.css-1x438zi{font-family:inherit;font-weight:700;line-height:1.25;color:var(--theme-ui-colors-heading,rgb(36,42,49));font-size:20px;margin-top:16px;}.css-1x438zi a{color:inherit;-webkit-text-decoration:none;text-decoration:none;}@media screen and (min-width:40em){.css-1x438zi{font-size:32px;}}@media screen and (min-width:52em){.css-1x438zi{font-size:48px;}}</style><h1 id="img-srchttpsblobscdngitbookcomv0bgitbook-28427appspotcomospaces2f-loe8air7wqozly_pc0o2favatarpnggeneration1568371004584423altmedia-stylemax-height-69px-margin-0px-padding-0px-border-radius-5px" class="css-1x438zi"><style data-emotion-css="9whsf3">.css-9whsf3{max-width:100%;}</style><img src="https://blobscdn.gitbook.com/v0/b/gitbook-28427.appspot.com/o/spaces%2F-Loe8Air7wQOZly_pC0o%2Favatar.png?generation=1568371004584423&amp;alt=media" style="max-height:69px;margin:0px;padding:0px;border-radius:5px" class="css-9whsf3"/></h1><ul class="css-0"><li class="css-0"><style data-emotion-css="1vbnbe4">.css-1vbnbe4{display:block;padding-left:8px;padding-right:8px;padding-top:8px;padding-bottom:8px;color:inherit;-webkit-text-decoration:none;text-decoration:none;font-size:14px;font-weight:bold;}.css-1vbnbe4.active{color:var(--theme-ui-colors-primary,#E53D34);}</style><a href="https://github.com/topisani/OTTO" class="css-1vbnbe4">GitHub</a></li></ul><style data-emotion-css="1isemmb">.css-1isemmb{margin-left:8px;}</style><style data-emotion-css="t2zxny">.css-t2zxny{-webkit-appearance:none;-moz-appearance:none;appearance:none;font-family:inherit;font-size:14px;font-weight:bold;margin:0;padding-left:8px;padding-right:8px;padding-top:8px;padding-bottom:8px;color:var(--theme-ui-colors-text,#3b454e);background-color:var(--theme-ui-colors-muted,rgb(245,247,249));border:0;border-radius:2px;margin-left:8px;}.css-t2zxny:focus{outline:2px solid;}</style><button class="css-t2zxny">light</button></div></div></div></header><style data-emotion-css="11qjisw">.css-11qjisw{-webkit-flex:1 1 auto;-ms-flex:1 1 auto;flex:1 1 auto;}</style><style data-emotion-css="3url3g">.css-3url3g{box-sizing:border-box;min-width:0;-webkit-flex:1 1 auto;-ms-flex:1 1 auto;flex:1 1 auto;}</style><main class="css-3url3g"><div class="css-10qzsxd"><style data-emotion-css="xs5at7">.css-xs5at7{display:block;margin-left:-16px;margin-right:-16px;}@media screen and (min-width:40em){.css-xs5at7{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;}}</style><div class="css-xs5at7"><style data-emotion-css="1grwdwx">@media screen and (min-width:40em){.css-1grwdwx{display:block;}}</style><style data-emotion-css="pacivu">.css-pacivu{width:256px;-webkit-flex:none;-ms-flex:none;flex:none;padding-left:16px;padding-right:16px;padding-top:16px;padding-bottom:32px;margin-top:64px;}@media screen and (min-width:40em){.css-pacivu{margin-top:0;}}@media screen and (min-width:40em){.css-pacivu{display:block;}}</style><div><style data-emotion-css="qccmke">.css-qccmke{position:fixed;top:0;left:0;bottom:0;z-index:1;min-width:0;width:256px;max-height:100vh;overflow-x:visible;overflow-y:auto;-webkit-overflow-scrolling:touch;-webkit-transition:-webkit-transform .2s ease-out;-webkit-transition:transform .2s ease-out;transition:transform .2s ease-out;-webkit-transform:translate(-100%);-ms-transform:translate(-100%);transform:translate(-100%);background-color:var(--theme-ui-colors-background,#fff);width:256px;-webkit-flex:none;-ms-flex:none;flex:none;padding-left:16px;padding-right:16px;padding-top:16px;padding-bottom:32px;margin-top:64px;}@media screen and (min-width:40em){.css-qccmke{position:-webkit-sticky;position:sticky;bottom:auto;max-height:none;-webkit-transform:none;-ms-transform:none;transform:none;background-color:transparent;}}@media screen and (min-width:40em){.css-qccmke{margin-top:0;}}@media screen and (min-width:40em){.css-qccmke{display:block;}}</style><div class="css-qccmke"><style data-emotion-css="1rvtlej">.css-1rvtlej{list-style:none;padding:0;margin:0;}</style><ul class="css-1rvtlej"><li><style data-emotion-css="70qvj9">.css-70qvj9{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;}</style><div class="css-70qvj9"><a class="css-1vbnbe4" href="/">Introduction</a></div></li><li><div class="css-70qvj9"><a class="css-1vbnbe4" href="/dev-guide">Dev Guide</a><style data-emotion-css="zdpt2t">.css-zdpt2t{margin-left:auto;}</style><style data-emotion-css="vewblg">.css-vewblg{-webkit-appearance:none;-moz-appearance:none;appearance:none;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;padding:8px;margin:0;border:0;border-radius:0;color:inherit;background-color:transparent;margin-left:auto;}.css-vewblg:hover,.css-vewblg:focus{color:var(--theme-ui-colors-primary,#E53D34);}</style><button title="Expand Section" class="css-vewblg"><svg viewBox="0 0 16 16" width="16" height="16"><style data-emotion-css="1p6iz05">.css-1p6iz05{-webkit-transform-origin:8 8;-ms-transform-origin:8 8;transform-origin:8 8;-webkit-transition:-webkit-transform .1s ease-out;-webkit-transition:transform .1s ease-out;transition:transform .1s ease-out;}</style><g transform="rotate(0 8 8)" class="css-1p6iz05"><path stroke="currentcolor" stroke-width="2" fill="none" d="M14 6 L8 12 L2 6"></path></g></svg></button></div></li></ul></div></div><style data-emotion-css="7w1bm1">.css-7w1bm1{overflow:hidden;padding-left:16px;padding-right:16px;}</style><div class="css-7w1bm1"><h1 id="inter-thread-communication" class="css-1x438zi">Inter-Thread Communication</h1><style data-emotion-css="1jhw1p0">.css-1jhw1p0{font-family:inherit;font-weight:700;line-height:1.25;color:var(--theme-ui-colors-heading,rgb(36,42,49));font-size:24px;}.css-1jhw1p0 a{color:inherit;-webkit-text-decoration:none;text-decoration:none;}</style><h2 id="actions" class="css-1jhw1p0">Actions</h2><p class="css-0">Actions are at the center of the inter-thread communication model used in OTTO. The are the &quot;packages&quot; that are sent between threads.</p><p class="css-0">An action is defined as a type alias to <style data-emotion-css="c37ior">.css-c37ior{font-family:"Source Code Pro",Menlo,monospace;color:var(--theme-ui-colors-text,#3b454e);background-color:var(--theme-ui-colors-muted,rgb(245,247,249));font-size:14px;padding-top:3px;padding-bottom:3px;padding-left:6px;padding-right:6px;margin-left:1px;margin-right:1px;border-radius:3px;}</style><code class="css-c37ior">itc::Action&lt;Tag, Args...&gt;</code> where <code class="css-c37ior">Tag</code> is a unique tag type per action, and <code class="css-c37ior">Args...</code> is an arbitrary number of arguments passed with the action.</p><style data-emotion-css="15y6o9i">.css-15y6o9i{font-family:"Source Code Pro",Menlo,monospace;font-size:14px;line-height:1.3;padding:16px;color:var(--theme-ui-colors-text,#3b454e);overflow:auto;border-radius:3px;background-color:var(--theme-ui-colors-muted,rgb(245,247,249));}.css-15y6o9i code{color:inherit;}.css-15y6o9i .comment,.css-15y6o9i .prolog,.css-15y6o9i .doctype,.css-15y6o9i .cdata,.css-15y6o9i .punctuation,.css-15y6o9i .operator,.css-15y6o9i .entity,.css-15y6o9i .url{color:var(--theme-ui-colors-gray,#777);}.css-15y6o9i .property,.css-15y6o9i .tag,.css-15y6o9i .boolean,.css-15y6o9i .number,.css-15y6o9i .constant,.css-15y6o9i .symbol,.css-15y6o9i .deleted,.css-15y6o9i .function,.css-15y6o9i .class-name,.css-15y6o9i .regex,.css-15y6o9i .important,.css-15y6o9i .variable{color:var(--theme-ui-colors-purple,#705);}.css-15y6o9i .atrule,.css-15y6o9i .attr-value,.css-15y6o9i .keyword{color:#07a;}.css-15y6o9i .selector,.css-15y6o9i .attr-name,.css-15y6o9i .string,.css-15y6o9i .char,.css-15y6o9i .builtin,.css-15y6o9i .inserted{color:var(--theme-ui-colors-secondary,#119);}.css-15y6o9i .react-syntax-highlighter-line-number{color:var(--theme-ui-colors-mutedText,rgb(193,199,205));font-size:12px;margin-left:1px;margin-right:5px;}</style><style data-emotion-css="1tjemzw">.css-1tjemzw{font-family:"Source Code Pro",Menlo,monospace;color:var(--theme-ui-colors-text,#3b454e);font-size:14px;}</style><pre class="css-15y6o9i" style="background:"><code style="float:left;padding-right:10px"><span class="react-syntax-highlighter-line-number">1
</span><span class="react-syntax-highlighter-line-number">2
</span><span class="react-syntax-highlighter-line-number">3
</span><span class="react-syntax-highlighter-line-number">4
</span><span class="react-syntax-highlighter-line-number">5
</span><span class="react-syntax-highlighter-line-number">6
</span><span class="react-syntax-highlighter-line-number">7
</span></code><code><span class="token keyword">struct</span> <span class="token class-name">Actions</span> <span class="token punctuation">{</span>
  <span class="token comment">/// Set the sample buffer.</span>
  <span class="token comment">/// Sent whenever the sample buffer should change.</span>
  <span class="token comment">/// @param buffer the location of the new sample data. Allocated from the audio pool.</span>
  <span class="token keyword">using</span> set_sample_buffer <span class="token operator">=</span> itc<span class="token operator">::</span>Action<span class="token operator">&lt;</span><span class="token keyword">struct</span> <span class="token class-name">set_sample_action</span><span class="token punctuation">,</span> gsl<span class="token operator">::</span>span<span class="token operator">&lt;</span><span class="token keyword">float</span><span class="token operator">&gt;&gt;</span><span class="token punctuation">;</span>
  <span class="token comment">//    ~~~~~~~ A ~~~~~~~               ~~~~~~~~~~~ B ~~~~~~~~~~  ~~~~~~~ C ~~~~~~</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><p class="css-0">In the action defined above, the action has the name (<code class="css-c37ior">A</code>) <code class="css-c37ior">set_sample_buffer</code>. The unusual syntax at <code class="css-c37ior">B</code> declares a tag type <code class="css-c37ior">set_sample_action</code>, which will never be defined. Since the tag type is only used to differentiate the action types, this type is never used for anything else</p><p class="css-0">User-defined actions are usually defined in an Actions struct in the engine namespace. </p><h2 id="action-receivers" class="css-1jhw1p0">Action Receivers</h2><p class="css-0">Actions are received and handled by <em class="css-0">action receivers</em>. These can be any class that specifies an <em class="css-0">action handler</em> for the given action. The most common examples of action receivers are the engine&#x27;s <code class="css-c37ior">Audio</code> and <code class="css-c37ior">Screen</code> objects. These receive information from the engine by receiving actions.</p><p class="css-0">One can check whether a class <code class="css-c37ior">T</code> is an action receiver for the action <code class="css-c37ior">A</code> using the type trait <code class="css-c37ior">itc::ActionReceiver::is&lt;T, A&gt;</code>.</p><h2 id="action-handlers" class="css-1jhw1p0">Action handlers</h2><p class="css-0">Specific actions are handled in the receivers by <em class="css-0">action handlers</em> (the terminology isn&#x27;t terribly important). They are member functions of the <em class="css-0">action receiver</em>, which are called <code class="css-c37ior">action</code>, and take the type of the action (<code class="css-c37ior">A</code>) as the first parameter, and the actions arguments (<code class="css-c37ior">B</code>) as the following parameters. </p><pre class="css-15y6o9i" style="background:"><code style="float:left;padding-right:10px"><span class="react-syntax-highlighter-line-number">1
</span><span class="react-syntax-highlighter-line-number">2
</span><span class="react-syntax-highlighter-line-number">3
</span><span class="react-syntax-highlighter-line-number">4
</span></code><code><span class="token keyword">void</span> <span class="token function">action</span><span class="token punctuation">(</span>Actions<span class="token operator">::</span>rotation_variable<span class="token punctuation">,</span> std<span class="token operator">::</span>atomic<span class="token operator">&lt;</span><span class="token keyword">float</span><span class="token operator">&gt;</span><span class="token operator">&amp;</span> v<span class="token punctuation">)</span> <span class="token keyword">noexcept</span><span class="token punctuation">;</span>
<span class="token comment">//          ~~~~~~~~~~~ A ~~~~~~~~~~~~  ~~~~~~~~~ B ~~~~~~~~~ </span>
<span class="token keyword">void</span> <span class="token function">action</span><span class="token punctuation">(</span>itc<span class="token operator">::</span>prop_change<span class="token operator">&lt;</span><span class="token operator">&amp;</span>Props<span class="token operator">::</span>leslie<span class="token operator">&gt;</span><span class="token punctuation">,</span> <span class="token keyword">float</span> l<span class="token punctuation">)</span> <span class="token keyword">noexcept</span><span class="token punctuation">;</span>
<span class="token comment">//          ~~~~~~~~~~~~~~~~ D ~~~~~~~~~~~~~  ~~ B ~~</span>
</code></pre><p class="css-0">Action handlers should not be called directly, but can be called using <code class="css-c37ior">itc::call_receiver(ar, Action::data(args...))</code>. This allows us to add other ways of defining action handlers in the future (for instance forwarding all actions to a subobject etc.). </p><h2 id="actionqueue" class="css-1jhw1p0">ActionQueue</h2><p class="css-0"><code class="css-c37ior">itc::ActionQueue</code> is a concrete class, which is in essence just a thread-safe queue of function objects, which can be pushed to by one thread and executed by another. It then has a <code class="css-c37ior">push</code> function to help enqueue a function that calls an action handler, but usually you don&#x27;t need to interact with it.</p><p class="css-0">When using the framework, you will mostly notice two <code class="css-c37ior">ActionQueue</code>s, the <em class="css-0">graphics queue</em> and the <em class="css-0">audio queue</em>. The <em class="css-0">graphics queue</em> is executed at the start of each frame, and is available as <code class="css-c37ior">UIManager::current().action_queue()</code>. The <em class="css-0">audio_queue</em> is executed at the start of each buffer, and is available as <code class="css-c37ior">AudioManager::current().action_queue()</code>.</p><p class="css-0">Once again, in normal use, you will not need to interact with the queues directly, but it is nice to know of their existence.</p><h2 id="actionsender" class="css-1jhw1p0">ActionSender</h2><p class="css-0">The <code class="css-c37ior">ActionSender</code>s is how you send actions to be executed on a another thread, i.e., push them to an <code class="css-c37ior">ActionQueue</code>. The most important thing to know, is that the <code class="css-c37ior">ActionSender</code> needs to know the addresses of the <code class="css-c37ior">ActionReceiver</code>s it sends to. This is because the actual lambda which invokes <code class="css-c37ior">call_receiver</code> and calls the action handler, is constructed on the sender side, and is then pushed into the queue. This is first of all because the sending side is in our case the logic thread, which is where we have the most resources available, and secondly, it means we only have to do type erasure once, for the function. Also, this gives the sender the power to see whether the action receiver actually implements a handler, and then do nothing in case it doesn&#x27;t.</p><p class="css-0"><code class="css-c37ior">itc::ActionSender&lt;Ar...&gt;</code> is a class template, which takes the receivers the sender sends actions to. Its constructor takes a <code class="css-c37ior">queue</code>, and then references to the receivers.</p><p class="css-0">Since <code class="css-c37ior">ActionSender</code>s are per queue, engines need a <code class="css-c37ior">GraphicsSndr</code> and an <code class="css-c37ior">AudioSndr</code>. To avoid having to use these separately, they can be used as a single ActionSender, by joining them using <code class="css-c37ior">itc::JoinedActionSender</code>. Calling <code class="css-c37ior">.push</code> on this, will call <code class="css-c37ior">.push</code> on each sender it is given.</p><style data-emotion-css="ezuxo">.css-ezuxo{font-family:inherit;font-weight:700;line-height:1.25;color:var(--theme-ui-colors-heading,rgb(36,42,49));font-size:20px;}.css-ezuxo a{color:inherit;-webkit-text-decoration:none;text-decoration:none;}</style><h3 id="example" class="css-ezuxo">Example</h3><pre class="css-15y6o9i" style="background:"><code style="float:left;padding-right:10px"><span class="react-syntax-highlighter-line-number">1
</span><span class="react-syntax-highlighter-line-number">2
</span><span class="react-syntax-highlighter-line-number">3
</span><span class="react-syntax-highlighter-line-number">4
</span><span class="react-syntax-highlighter-line-number">5
</span><span class="react-syntax-highlighter-line-number">6
</span><span class="react-syntax-highlighter-line-number">7
</span><span class="react-syntax-highlighter-line-number">8
</span><span class="react-syntax-highlighter-line-number">9
</span><span class="react-syntax-highlighter-line-number">10
</span><span class="react-syntax-highlighter-line-number">11
</span><span class="react-syntax-highlighter-line-number">12
</span><span class="react-syntax-highlighter-line-number">13
</span><span class="react-syntax-highlighter-line-number">14
</span><span class="react-syntax-highlighter-line-number">15
</span><span class="react-syntax-highlighter-line-number">16
</span><span class="react-syntax-highlighter-line-number">17
</span><span class="react-syntax-highlighter-line-number">18
</span><span class="react-syntax-highlighter-line-number">19
</span><span class="react-syntax-highlighter-line-number">20
</span><span class="react-syntax-highlighter-line-number">21
</span><span class="react-syntax-highlighter-line-number">22
</span><span class="react-syntax-highlighter-line-number">23
</span><span class="react-syntax-highlighter-line-number">24
</span><span class="react-syntax-highlighter-line-number">25
</span><span class="react-syntax-highlighter-line-number">26
</span><span class="react-syntax-highlighter-line-number">27
</span><span class="react-syntax-highlighter-line-number">28
</span><span class="react-syntax-highlighter-line-number">29
</span><span class="react-syntax-highlighter-line-number">30
</span><span class="react-syntax-highlighter-line-number">31
</span></code><code><span class="token comment">// In otto::engines::some_synth in src/engines/synth/some_synth/some_synth.hpp</span>

<span class="token keyword">struct</span> <span class="token class-name">Screen</span><span class="token punctuation">;</span>
<span class="token keyword">using</span> GraphicsSndr <span class="token operator">=</span> itc<span class="token operator">::</span>ActionSender<span class="token operator">&lt;</span>Screen<span class="token punctuation">,</span> voices<span class="token operator">::</span>EnvelopeScreen<span class="token operator">&gt;</span><span class="token punctuation">;</span>

<span class="token keyword">struct</span> <span class="token class-name">Audio</span><span class="token punctuation">;</span>
<span class="token keyword">using</span> AudioSndr <span class="token operator">=</span> itc<span class="token operator">::</span>ActionSender<span class="token operator">&lt;</span>Audio<span class="token operator">&gt;</span><span class="token punctuation">;</span>

<span class="token keyword">using</span> Sndr <span class="token operator">=</span> itc<span class="token operator">::</span>JoinedActionSender<span class="token operator">&lt;</span>GraphicsSndr<span class="token punctuation">,</span> AudioSndr<span class="token operator">&gt;</span><span class="token punctuation">;</span>

<span class="token keyword">struct</span> <span class="token class-name">Engine</span> <span class="token operator">:</span> core<span class="token operator">::</span>engine<span class="token operator">::</span>SynthEngine<span class="token operator">&lt;</span>Engine<span class="token operator">&gt;</span> <span class="token punctuation">{</span>
  <span class="token comment">// ...</span>
<span class="token keyword">private</span><span class="token operator">:</span>
  GraphicsSndr graphics_sndr_<span class="token punctuation">;</span>
  AudioSndr audio_sndr_<span class="token punctuation">;</span>
  Sndr sndr_ <span class="token operator">=</span> <span class="token punctuation">{</span>graphics_sndr_<span class="token punctuation">,</span> audio_sndr_<span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token comment">// ...</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token comment">// Engine constructor, defined in some_synth.cpp file</span>

SynthEngine<span class="token operator">::</span><span class="token function">SynthEngine</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token operator">:</span> <span class="token function">screen</span><span class="token punctuation">(</span>std<span class="token operator">::</span>make_unique<span class="token operator">&lt;</span>Screen<span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span> 
    <span class="token function">envelope_screen</span><span class="token punctuation">(</span>std<span class="token operator">::</span>make_unique<span class="token operator">&lt;</span>voices<span class="token operator">::</span>EnvelopeScreen<span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token function">audio</span><span class="token punctuation">(</span>std<span class="token operator">::</span>make_unique<span class="token operator">&lt;</span>Audio<span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token function">graphics_sndr_</span><span class="token punctuation">(</span>services<span class="token operator">::</span>UIManager<span class="token operator">::</span><span class="token function">current</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">make_sndr</span><span class="token punctuation">(</span><span class="token operator">*</span>screen<span class="token punctuation">,</span> envelope_screen<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token function">audio_sndr_</span><span class="token punctuation">(</span>services<span class="token operator">::</span>AudioManager<span class="token operator">::</span><span class="token function">current</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">make_sndr</span><span class="token punctuation">(</span><span class="token operator">*</span>audio<span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
  <span class="token comment">// Send an action using the sender</span>
  sndr_<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>Actions<span class="token operator">::</span>rotation_variable<span class="token operator">::</span><span class="token function">data</span><span class="token punctuation">(</span>rotation_<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div></div></div></main></div></div></div></div><script id="gatsby-script-loader">/*<![CDATA[*/window.pagePath="/dev-guide/itc";window.webpackCompilationHash="765aa047a3cb74e7e14a";/*]]>*/</script><script id="gatsby-chunk-mapping">/*<![CDATA[*/window.___chunkMapping={"app":["/app-f4053caff0e3d0099362.js"],"component---packages-gatsby-theme-documentation-src-templates-doc-js":["/component---packages-gatsby-theme-documentation-src-templates-doc-js-3050a3c279815a8c4442.js"]};/*]]>*/</script><script src="/webpack-runtime-26ca6f1d7a23b7e277b7.js" async=""></script><script src="/app-f4053caff0e3d0099362.js" async=""></script><script src="/commons-4bfc53ff4c4528b99da9.js" async=""></script><script src="/component---packages-gatsby-theme-documentation-src-templates-doc-js-3050a3c279815a8c4442.js" async=""></script></body></html>